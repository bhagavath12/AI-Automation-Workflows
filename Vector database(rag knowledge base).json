{
  "name": "Vector database (RAG Knowledge Base)",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [ -80, -64 ],
      "id": "manual-trigger-id",
      "name": "When clicking ‘Execute workflow’"
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "REPLACE_WITH_YOUR_DRIVE_FILE_ID",
          "mode": "list",
          "cachedResultName": "Knowledge_Base_Document.pdf",
          "cachedResultUrl": "https://drive.google.com/file/d/REPLACE_WITH_YOUR_DRIVE_FILE_ID/view"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [ 128, -64 ],
      "id": "google-drive-download-id",
      "name": "Download file",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "CREDENTIAL_ID_HERE",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "mode": "insert",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [ 416, -64 ],
      "id": "supabase-vector-store-id",
      "name": "Supabase Vector Store",
      "credentials": {
        "supabaseApi": {
          "id": "CREDENTIAL_ID_HERE",
          "name": "Supabase Account"
        }
      }
    },
    {
      "parameters": {
        "dataType": "binary",
        "loader": "pdfLoader",
        "textSplittingMode": "custom",
        "options": {
          "splitPages": true
        }
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [ 512, 160 ],
      "id": "data-loader-id",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "modelName": "models/gemini-embedding-001"
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsGoogleGemini",
      "typeVersion": 1,
      "position": [ 384, 160 ],
      "id": "gemini-embeddings-id",
      "name": "Embeddings Google Gemini",
      "credentials": {
        "googlePalmApi": {
          "id": "CREDENTIAL_ID_HERE",
          "name": "Google Gemini Api account"
        }
      }
    },
    {
      "parameters": {
        "chunkSize": 1500,
        "chunkOverlap": 300,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "typeVersion": 1,
      "position": [ 592, 368 ],
      "id": "text-splitter-id",
      "name": "Recursive Character Text Splitter"
    },
    {
      "parameters": {
        "formTitle": "DOC SUB",
        "formDescription": "Submit the document to add to the knowledge base",
        "formFields": {
          "values": [
            {
              "fieldLabel": "doc",
              "fieldType": "file",
              "acceptFileTypes": "PDF, DOC"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.3,
      "position": [ -80, -256 ],
      "id": "form-trigger-id",
      "name": "On form submission",
      "webhookId": "REPLACE_WITH_YOUR_WEBHOOK_ID"
    }
  ],
  "pinData": {},
  "connections": {
    "When clicking ‘Execute workflow’": { "main": [[ { "node": "Download file", "type": "main", "index": 0 } ]] },
    "Download file": { "main": [[ { "node": "Supabase Vector Store", "type": "main", "index": 0 } ]] },
    "Default Data Loader": { "ai_document": [[ { "node": "Supabase Vector Store", "type": "ai_document", "index": 0 } ]] },
    "Embeddings Google Gemini": { "ai_embedding": [[ { "node": "Supabase Vector Store", "type": "ai_embedding", "index": 0 } ]] },
    "Recursive Character Text Splitter": { "ai_textSplitter": [[ { "node": "Default Data Loader", "type": "ai_textSplitter", "index": 0 } ]] },
    "On form submission": { "main": [[ { "node": "Supabase Vector Store", "type": "main", "index": 0 } ]] }
  },
  "active": false,
  "settings": { "executionOrder": "v1" },
  "meta": { "instanceId": "REPLACE_WITH_INSTANCE_ID" },
  "tags": []
}